!function(n,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):n.Circles=t()}(this,function(){"use strict";var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){setTimeout(n,1e3/60)},n=function(n){var i=n.id,t;(this._el=document.getElementById(i),null!==this._el)&&(this._radius=n.radius||10,this._duration=void 0===n.duration?500:n.duration,this._value=0,this._maxValue=n.maxValue||100,this._text=void 0===n.text?function(n){return this.htmlifyNumber(n)}:n.text,this._strokeWidth=n.width||10,this._colors=n.colors||["#EEE","#F00"],this._svg=null,this._movingPath=null,this._wrapContainer=null,this._textContainer=null,this._wrpClass=n.wrpClass||"circles-wrp",this._textClass=n.textClass||"circles-text",this._valClass=n.valueStrokeClass||"circles-valueStroke",this._maxValClass=n.maxValueStrokeClass||"circles-maxValueStroke",this._styleWrapper=n.styleWrapper===!1?!1:!0,this._styleText=n.styleText===!1?!1:!0,t=Math.PI/180*270,this._start=-Math.PI/2,this._startPrecise=this._precise(this._start),this._circ=t-this._start,this._generate().update(n.value||0))};return n.prototype={VERSION:"0.0.6",_generate:function(){return this._svgSize=2*this._radius,this._radiusAdjusted=this._radius-this._strokeWidth/2,this._generateSvg()._generateText()._generateWrapper(),this._el.innerHTML="",this._el.appendChild(this._wrapContainer),this},_setPercentage:function(n){this._movingPath.setAttribute("d",this._calculatePath(n,!0));this._textContainer.innerHTML=this._getText(this.getValueFromPercent(n))},_generateWrapper:function(){return this._wrapContainer=document.createElement("div"),this._wrapContainer.className=this._wrpClass,this._styleWrapper&&(this._wrapContainer.style.position="relative",this._wrapContainer.style.display="inline-block"),this._wrapContainer.appendChild(this._svg),this._wrapContainer.appendChild(this._textContainer),this},_generateText:function(){var n,t;if(this._textContainer=document.createElement("div"),this._textContainer.className=this._textClass,this._styleText){n={position:"absolute",top:0,left:0,textAlign:"center",width:"100%",fontSize:.7*this._radius+"px",height:this._svgSize+"px",lineHeight:this._svgSize+"px"};for(t in n)this._textContainer.style[t]=n[t]}return this._textContainer.innerHTML=this._getText(0),this},_getText:function(n){return this._text?(void 0===n&&(n=this._value),n=parseFloat(n.toFixed(2)),"function"==typeof this._text?this._text.call(this,n):this._text):""},_generateSvg:function(){return this._svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._svg.setAttribute("xmlns","http://www.w3.org/2000/svg"),this._svg.setAttribute("width",this._svgSize),this._svg.setAttribute("height",this._svgSize),this._generatePath(100,!1,this._colors[0],this._maxValClass)._generatePath(1,!0,this._colors[1],this._valClass),this._movingPath=this._svg.getElementsByTagName("path")[1],this},_generatePath:function(n,t,i,r){var u=document.createElementNS("http://www.w3.org/2000/svg","path");return u.setAttribute("fill","transparent"),u.setAttribute("stroke",i),u.setAttribute("stroke-width",this._strokeWidth),u.setAttribute("d",this._calculatePath(n,t)),u.setAttribute("class",r),this._svg.appendChild(u),this},_calculatePath:function(n,t){var i=this._start+n/100*this._circ,r=this._precise(i);return this._arc(r,t)},_arc:function(n,t){var i=n-.001,r=n-this._startPrecise<Math.PI?0:1;return["M",this._radius+this._radiusAdjusted*Math.cos(this._startPrecise),this._radius+this._radiusAdjusted*Math.sin(this._startPrecise),"A",this._radiusAdjusted,this._radiusAdjusted,0,r,1,this._radius+this._radiusAdjusted*Math.cos(i),this._radius+this._radiusAdjusted*Math.sin(i),t?"":"Z"].join(" ")},_precise:function(n){return Math.round(1e3*n)/1e3},htmlifyNumber:function(n,t,i){t=t||"circles-integer";i=i||"circles-decimals";var r=(n+"").split("."),u='<span class="'+t+'">'+r[0]+"<\/span>";return r.length>1&&(u+='.<span class="'+i+'">'+r[1].substring(0,2)+"<\/span>"),u},updateRadius:function(n){return this._radius=n,this._generate().update(!0)},updateWidth:function(n){return this._strokeWidth=n,this._generate().update(!0)},updateColors:function(n){this._colors=n;var t=this._svg.getElementsByTagName("path");return t[0].setAttribute("stroke",n[0]),t[1].setAttribute("stroke",n[1]),this},getPercent:function(){return 100*this._value/this._maxValue},getValueFromPercent:function(n){return this._maxValue*n/100},getValue:function(){return this._value},getMaxValue:function(){return this._maxValue},update:function(n,i){if(n===!0)return this._setPercentage(this.getPercent()),this;if(this._value==n||isNaN(n))return this;void 0===i&&(i=this._duration);var r,f,h,s,e=this,u=e.getPercent(),o=1;return this._value=Math.min(this._maxValue,Math.max(0,n)),i?(r=e.getPercent(),f=r>u,o+=r%1,h=Math.floor(Math.abs(r-u)/o),s=i/h,function c(n){if(f?u+=o:u-=o,f&&u>=r||!f&&r>=u)return void t(function(){e._setPercentage(r)});t(function(){e._setPercentage(u)});var i=Date.now(),h=i-n;h>=s?c(i):setTimeout(function(){c(Date.now())},s-h)}(Date.now()),this):(this._setPercentage(this.getPercent()),this)}},n.create=function(t){return new n(t)},n});